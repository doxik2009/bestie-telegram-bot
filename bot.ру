import os
import random
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes

# =======================
# –í–û–ü–†–û–°–´ ‚Äî –ú–û–Ø –ë–ï–°–¢–ò–Ø (–í–°–ï)
# =======================

QUESTIONS_BESTIA = [
{"q": "–¢—ã –ø–∏—à–µ—à—å ¬´–æ–∫¬ª ‚Äî —ç—Ç–æ‚Ä¶"},
{"q": "–ï—Å–ª–∏ —è –æ–ø–∞–∑–¥—ã–≤–∞—é –Ω–∞ 20 –º–∏–Ω—É—Ç, —Ç—ã‚Ä¶"},
{"q": "–í –ø–ª–æ—Ö–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏ –º–Ω–µ –ª—É—á—à–µ –ø—Ä–∏—Å–ª–∞—Ç—å‚Ä¶"},
{"q": "–ú—ã –º–æ–∂–µ–º –Ω–µ –æ–±—â–∞—Ç—å—Å—è –º–µ—Å—è—Ü –∏ –Ω–µ –æ–±–∏–∂–∞—Ç—å—Å—è?"},
{"q": "–ï—Å–ª–∏ –º—ã –ø–æ—Å—Å–æ—Ä–∏–ª–∏—Å—å ‚Äî –∫—Ç–æ –ø–µ—Ä–≤—ã–π –ø—Ä–∏—à–ª—ë—Ç –º–µ–º?"},
{"q": "–ö–∞–∫—É—é —Å–∞–º—É—é —Å—Ç—Ä–∞–Ω–Ω—É—é –ø—Ä–∏–≤—ã—á–∫—É —É –º–µ–Ω—è –∑–Ω–∞–µ—à—å?"},
{"q": "–ï—Å–ª–∏ –º—ã –∏–¥—ë–º –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫—É –≤–º–µ—Å—Ç–µ, –∫—Ç–æ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º?"},
{"q": "–ö—Ç–æ –∏–∑ –Ω–∞—Å –±–æ–ª—å—à–µ –ª—é–±–∏—Ç –∫–æ—Ñ–µ?"},
{"q": "–ï—Å–ª–∏ –≤–¥—Ä—É–≥ –Ω–∞—á–Ω—ë—Ç—Å—è —Ç–∞–Ω—Ü–µ–≤–∞–ª—å–Ω—ã–π –±–∞—Ç—Ç–ª, –∫—Ç–æ –≤—ã–∏–≥—Ä–∞–µ—Ç?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –∑–∞–±—ã–≤–∞–µ—Ç –∫–ª—é—á–∏?"},
{"q": "–° –∫–µ–º –ª–µ–≥—á–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–µ–∫—Ä–µ—Ç–æ–º?"},
{"q": "–ö—Ç–æ –≥—Ä–æ–º—á–µ —Å–º–µ—ë—Ç—Å—è?"},
{"q": "–ï—Å–ª–∏ –±—ã –º—ã —Å—Ç–∞–ª–∏ —Å—É–ø–µ—Ä–≥–µ—Ä–æ—è–º–∏, –∫—Ç–æ –±—ã –±—ã–ª‚Ä¶"},
{"q": "–ö—Ç–æ —á–∞—â–µ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–ø–æ—Ä—ã?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –µ—Å—Ç —Å–ª–∞–¥–∫–æ–µ?"},
{"q": "–ö—Ç–æ –ª—É—á—à–µ –≥–æ—Ç–æ–≤–∏—Ç –º–µ–º—ã?"},
{"q": "–ï—Å–ª–∏ —è –ø–ª–∞—á—É –Ω–∞–¥ —Å–µ—Ä–∏–∞–ª–æ–º, –∫—Ç–æ –º–µ–Ω—è –ø–æ–π–º—ë—Ç?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —Å—Ç–∞–≤–∏—Ç –ª–∞–π–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–∏—Å?"},
{"q": "–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –∫—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Å–¥–∞—ë—Ç—Å—è?"},
{"q": "–ö—Ç–æ –∏–∑ –Ω–∞—Å –±–æ–ª—å—à–µ –ª—é–±–∏—Ç –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è?"},
{"q": "–ö—Ç–æ –ª—É—á—à–µ —Ö—Ä–∞–Ω–∏—Ç —Å–µ–∫—Ä–µ—Ç—ã?"},
{"q": "–ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Å–∫—É—á–∞–µ—Ç, –∫—Ç–æ –ø–µ—Ä–≤—ã–º –Ω–∞–ø–∏—à–µ—Ç?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –¥–µ–ª–∞–µ—Ç —Å–º–µ—à–Ω—ã–µ —Å–µ–ª—Ñ–∏?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —Å–ø–æ—Ä–∏—Ç –æ —Ñ–∏–ª—å–º–∞—Ö?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –±–µ—Ä—ë—Ç –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É?"},
{"q": "–ï—Å–ª–∏ —è –≥—Ä—É—â—É, –∫—Ç–æ –º–µ–Ω—è —Ä–∞–∑–≤–µ—Å–µ–ª–∏—Ç?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç —à—É—Ç–∏—Ç—å?"},
{"q": "–ï—Å–ª–∏ –∏–¥—ë–º –≤ –º–∞–≥–∞–∑–∏–Ω, –∫—Ç–æ –±–æ–ª—å—à–µ –ø–æ–∫—É–ø–∞–µ—Ç?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –≤—Å—Ç—Ä–µ—á–∏?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç –Ω–∞ –≤—Å—Ç—Ä–µ—á–∏?"},
{"q": "–ö—Ç–æ —Å–º–µ—à–Ω–µ–µ —à—É—Ç–∏—Ç?"},
{"q": "–ö—Ç–æ –ª—É—á—à–µ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç –∏–º–µ–Ω–∞?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –∏–¥–µ–∏?"},
{"q": "–ö—Ç–æ —Å–∏–ª—å–Ω–µ–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏—Ö?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞—Ö–æ–¥–∏—Ç –º–µ–º—ã?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –æ—Å–≤–∞–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —à—É—Ç–∏—Ç –ø—Ä–æ –µ–¥—É?"},
{"q": "–ö—Ç–æ –≥—Ä–æ–º—á–µ —Å–º–µ—ë—Ç—Å—è –Ω–∞–¥ –º–µ–º–∞–º–∏?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —Ç–µ—Ä—è–µ—Ç –≤–µ—â–∏?"},
{"q": "–ö—Ç–æ –∏–∑ –Ω–∞—Å –±–æ–ª—å—à–µ —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–π?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –ø–∏—à–µ—Ç –ø–µ—Å–Ω–∏, —Å—Ç–∏—Ö–∏ –∏–ª–∏ —à—É—Ç–∫–∏?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –Ω–æ–≤–æ—Å—Ç–∏?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –¥–µ–ª–∞–µ—Ç –Ω–µ–æ–±—ã—á–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏?"},
{"q": "–ö—Ç–æ –ª—É—á—à–µ –≥–æ—Ç–æ–≤ –¥–µ–ª–∏—Ç—å—Å—è?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –∑–∞–±—ã–≤–∞–µ—Ç –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –±–µ—Ä—ë—Ç –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞—Ö?"},
{"q": "–ö—Ç–æ –≥—Ä–æ–º—á–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –º–µ–º—ã?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —à—É—Ç–∏—Ç –ø—Ä–æ —Ä–∞–±–æ—Ç—É?"},
{"q": "–ö—Ç–æ –±–æ–ª—å—à–µ –ª—é–±–∏—Ç —Å–ø–æ–Ω—Ç–∞–Ω–Ω—ã–µ –≤–µ—á–µ—Ä–∏–Ω–∫–∏?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–∞–º?"},
{"q": "–ö—Ç–æ –ª—É—á—à–µ –∑–Ω–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –¥—Ä—É–≥ –¥—Ä—É–≥–∞?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —Å–º–µ—ë—Ç—Å—è –Ω–∞–¥ —Å–æ–±–æ–π?"}
]

# =======================
# –í–û–ü–†–û–°–´ ‚Äî –ú–ï–ñ–î–£ –ù–ê–ú–ò, –î–ï–í–û–ß–ö–ê–ú–ò (–í–°–ï)
# =======================

QUESTIONS_COFFEE = [
{"q": "–ï—Å–ª–∏ –º—ã –Ω–µ –∑–Ω–∞–∫–æ–º—ã, –∞ —Ç–µ–±–µ –¥–µ–ª–∞—é—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç ‚Äî –∫–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å?"},
{"q": "–¢—ã –ø—Ä–∏—à–ª–∞ –Ω–∞ –∫–æ—Ñ–µ –∏ –≤–∏–¥–∏—à—å –Ω–æ–≤—ã–π –¥–µ—Å–µ—Ä—Ç ‚Äî —á—Ç–æ –¥–µ–ª–∞–µ—à—å?"},
{"q": "–ï—Å–ª–∏ –≤–∏–¥–∏—à—å —á–µ–ª–æ–≤–µ–∫–∞ —Å —Ç–∞–∫–æ–π –∂–µ —Å—É–º–∫–æ–π, —á—Ç–æ –¥—É–º–∞–µ—à—å?"},
{"q": "–¢–≤–æ–π –ª—é–±–∏–º—ã–π —Å–ø–æ—Å–æ–± –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è?"},
{"q": "–ß—Ç–æ —Å–∫–∞–∑–∞—Ç—å –ø–µ—Ä–≤—ã–º, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –Ω–µ–ª–æ–≤–∫–æ?"},
{"q": "–ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ —Å—Ç—Ä–∞–Ω–Ω—ã—Ö –ª—é–¥–µ–π –≤ –∫–æ–º–ø–∞–Ω–∏–∏?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ–±–µ —Å–∏–º–ø–∞—Ç–∏—á–µ–Ω?"},
{"q": "–ß—Ç–æ —Ç—ã –≤—ã–±–∏—Ä–∞–µ—à—å –Ω–∞ –ø–µ—Ä–≤–æ–π –≤—Å—Ç—Ä–µ—á–µ ‚Äî –≥–æ–≤–æ—Ä–∏—Ç—å –∏–ª–∏ —Å–ª—É—à–∞—Ç—å?"},
{"q": "–ï—Å–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞—é—Ç –ø—Ä–æ —Ä–∞–±–æ—Ç—É ‚Äî —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—à—å?"},
{"q": "–ö–∞–∫ —Ç—ã –æ–±—ã—á–Ω–æ –ª–æ–º–∞–µ—à—å –ª—ë–¥?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä?"},
{"q": "–ß—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è –≤ –Ω–æ–≤–æ–π –∫–æ–º–ø–∞–Ω–∏–∏?"},
{"q": "–ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ —á—É–∂–∏–µ —Å–º–µ—à–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è?"},
{"q": "–ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç ‚Äî —á—Ç–æ –¥—É–º–∞–µ—à—å?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ç–µ–º—ã –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞?"},
{"q": "–ö—Ç–æ —Å–º–µ—ë—Ç—Å—è –≥—Ä–æ–º—á–µ?"},
{"q": "–ö–∞–∫–æ–µ –ø–µ—Ä–≤–æ–µ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ —Ç—ã –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—à—å?"},
{"q": "–ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ —á—É–∂–∏–µ —Å–µ–∫—Ä–µ—Ç—ã?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∑–∞–≤–æ–¥–∏—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –¥–µ–ª–∏—Ç—Å—è –ª–∏—á–Ω—ã–º?"},
{"q": "–ö–∞–∫ —Ä–∞–∑—Ä—è–∂–∞–µ—à—å –Ω–µ–ª–æ–≤–∫—É—é –ø–∞—É–∑—É?"},
{"q": "–ß—Ç–æ –≥–æ–≤–æ—Ä–∏—à—å –ø—Ä–∏ —Ç–∏—à–∏–Ω–µ –∑–∞ —Å—Ç–æ–ª–æ–º?"},
{"q": "–ö–∞–∫ —Ç–µ–±–µ –ø—Ä–æ—â–µ –∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è ‚Äî –æ–¥–∏–Ω –Ω–∞ –æ–¥–∏–Ω –∏–ª–∏ –≤ –≥—Ä—É–ø–ø–µ?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –º–µ–º—ã?"},
{"q": "–ö–∞–∫ —Å–ª—É—à–∞–µ—à—å –∏—Å—Ç–æ—Ä–∏–∏ –æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Å–æ–≥–ª–∞—à–∞–µ—Ç—Å—è –Ω–∞ –∞–≤–∞–Ω—Ç—é—Ä—ã?"},
{"q": "–ö—Ç–æ –ª—É—á—à–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä?"},
{"q": "–ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ –Ω–µ–ª–æ–≤–∫–∏–µ –∏—Å—Ç–æ—Ä–∏–∏?"},
{"q": "–ß—Ç–æ –¥—É–º–∞–µ—à—å –æ —Å—Ç—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–∫–∞—Ö –ª—é–¥–µ–π?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –±–µ—Ä—ë—Ç –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤—É?"},
{"q": "–ß—Ç–æ –≥–æ–≤–æ—Ä–∏—à—å –ø—Ä–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–µ —Å—Ä–∞–∑—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ª—é–¥—å–º–∏?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ —Å–±–ª–∏–∂–∞–µ—Ç—Å—è?"},
{"q": "–ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ —Å–ª–∏—à–∫–æ–º —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –ª—é–¥–µ–π?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —Å–º–µ—ë—Ç—Å—è –Ω–∞–¥ –Ω–µ–ª–æ–≤–∫–æ—Å—Ç—è–º–∏?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–æ–≤–µ—Ä—è—Ç—å?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å—ã?"},
{"q": "–ö—Ç–æ –ø–µ—Ä–≤—ã–º —Å–º–µ—ë—Ç—Å—è –Ω–∞–¥ —à—É—Ç–∫–æ–π?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä?"},
{"q": "–ö—Ç–æ —á–∞—â–µ –¥–µ–ª–∞–µ—Ç –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã?"},
{"q": "–ö—Ç–æ –ª–µ–≥—á–µ –¥–µ–ª–∏—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è–º–∏?"},
{"q": "–ö–∞–∫ —Ä–µ–∞–≥–∏—Ä—É–µ—à—å –Ω–∞ —á—É–∂–∏–µ —Ñ–µ–π–ª—ã?"},
{"q": "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è?"},
{"q": "–ö—Ç–æ —á–∞—â–µ —Å–º–µ—ë—Ç—Å—è –Ω–∞–¥ —á—É–∂–∏–º–∏ —à—É—Ç–∫–∞–º–∏?"},
{"q": "–ö—Ç–æ –ø–µ—Ä–≤—ã–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–µ—Å–µ–¥—É?"}
]

FUN_COMMENTS = [
    "üòÇ –¢—É—Ç —Ç–æ—á–Ω–æ –µ—Å—Ç—å —á—Ç–æ –æ–±—Å—É–¥–∏—Ç—å",
    "üòè –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø–æ–≤–æ—Ä–æ—Ç",
    "ü§£ –ö–∞–∂–µ—Ç—Å—è, –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –ø–æ—à–ª–∞",
    "üòé –í–æ—Ç —ç—Ç–æ –æ—Ç–≤–µ—Ç—ã",
    "ü§ç –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ç–µ–ø–ª–æ"
]

# =======================
# –°–û–°–¢–û–Ø–ù–ò–ï
# =======================

GAMES = {}

class GameState:
    def __init__(self, mode):
        self.mode = mode
        self.q_index = 0

# =======================
# –ö–ù–û–ü–ö–ò
# =======================

def mode_keyboard():
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("üç∑ –ú–æ—è –ë–µ—Å—Ç–∏—è", callback_data="mode_bestia")],
        [InlineKeyboardButton("‚òï –ú–µ–∂–¥—É –Ω–∞–º–∏, –¥–µ–≤–æ—á–∫–∞–º–∏", callback_data="mode_coffee")]
    ])

def next_keyboard():
    return InlineKeyboardMarkup([
        [InlineKeyboardButton("‚û°Ô∏è –î–ê–õ–¨–®–ï", callback_data="next")]
    ])

# =======================
# –•–≠–ù–î–õ–ï–†–´
# =======================

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text(
        "‚òïüç∑ –§–û–†–ú–ê–¢ –ò–ì–†–´\n\n"
        "–ú–æ–∂–Ω–æ –∏–≥—Ä–∞—Ç—å –ø–æ–¥ –∫–æ—Ñ–µ –∏–ª–∏ –ø–æ–¥ –≤–∏–Ω–æ.\n"
        "–ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å, –æ—Ç–≤–µ—á–∞—Ç—å –≤—Å–ª—É—Ö, –æ–±—Å—É–∂–¥–∞—Ç—å.\n\n"
        "–≠—Ç–æ –Ω–µ —Ç–µ—Å—Ç, –∞ –ø–æ–≤–æ–¥ –ø–æ—Å–º–µ—è—Ç—å—Å—è üíõ\n\n"
        "/newgame ‚Äî –Ω–∞—á–∞—Ç—å"
    )

async def newgame(update: Update, context: ContextTypes.DEFAULT_TYPE):
    await update.message.reply_text("–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º:", reply_markup=mode_keyboard())

async def choose_mode(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    mode = "bestia" if query.data == "mode_bestia" else "coffee"
    GAMES[query.message.chat.id] = GameState(mode)

    await query.edit_message_text(
        "–ò–≥—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è ‚ú®\n–ù–∞–∂–∏–º–∞–π—Ç–µ ¬´–î–ê–õ–¨–®–ï¬ª, –∫–æ–≥–¥–∞ –≥–æ—Ç–æ–≤—ã.",
        reply_markup=next_keyboard()
    )

async def next_question(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    chat_id = query.message.chat.id
    game = GAMES.get(chat_id)
    if not game:
        return

    questions = QUESTIONS_BESTIA if game.mode == "bestia" else QUESTIONS_COFFEE

    if game.q_index >= len(questions):
        await query.message.reply_text("‚ú® –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞. –°–ø–∞—Å–∏–±–æ üíñ")
        del GAMES[chat_id]
        return

    q = questions[game.q_index]["q"]
    await query.message.reply_text(f"‚ùì {q}", reply_markup=next_keyboard())

    if random.random() < 0.35:
        await query.message.reply_text(random.choice(FUN_COMMENTS))

    game.q_index += 1

# =======================
# –ó–ê–ü–£–°–ö
# =======================

def main():
    token = os.getenv("BOT_TOKEN")
    if not token:
        raise RuntimeError("BOT_TOKEN not set")

    app = Application.builder().token(token).build()
    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("newgame", newgame))
    app.add_handler(CallbackQueryHandler(choose_mode, pattern="mode_.*"))
    app.add_handler(CallbackQueryHandler(next_question, pattern="next"))
    app.run_polling()

if __name__ == "__main__":
    main()
